<script type="text/javascript" src="../lib/jquery.js"></script>
<script type="text/javascript" src="splitter.js"></script>
<link rel="stylesheet/less" type="text/css" href="styles/theme.less">
<link rel="stylesheet" href="../lib/console/style2.css" type="text/css">
<link rel="stylesheet/less" type="text/css" href="styles/codemirror.less">
<link rel="stylesheet" href="../lib/codemirror/lib/codemirror.css">
<script src="../lib/codemirror/lib/codemirror.js"></script>
<script src="../styles/codemirror/clike.js"></script>
<script src="../styles/codemirror/mips.js"></script>
<script src="less.js" type="text/javascript"></script>
<script src="ui.js" type="text/javascript"></script>

<script src="../parse/c.js" type="text/javascript"></script>
<script src="../parse/walk.js" type="text/javascript"></script>
<script src="../parse/gen.js" type="text/javascript"></script>
<style>
body {
  margin: 0;
  overflow: hidden;
}
.splitter {
  height: 100%;
  width: 100%;
}
.splitter div {
}
.vsplitbar {
  width: 5px;
  background: #aaa;
}
.hsplitbar {
  height: 5px;
  background: #aaa;
}
.CodeMirror {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9999;
  margin: 0;
  padding: 0;
  border: 0px solid #BBBBBB;
  opacity: 1;
  font-size: 12pt;
  overflow: auto;
}
</style>
<script>
var editor;
$().ready(function(){
  $('#ConsoleSplitter').splitter(
    { splitHorizontal: true,
      resizeTo: window});
  $('#CodeViewSplitter').splitter(
    { splitVertical: true });
  editor = CodeMirror(document.getElementById("code"),
          { lineNumbers: true,
            theme: 'tneighties',
            onChange: handle_code,
            value: "int fib(int n) {\n  if(n < 2) return 1;\n  return fib(n - 1) + fib(n - 2);\n}",
            mode: "text/x-csrc" });
  editor.getScrollerElement().style.height = '100%';
  $(window).resize(function(e) {
    editor.refresh();
    mipsviewer.refresh();
  });
  mipsviewer = CodeMirror(document.getElementById("mips"),
                          { mode: 'mips',
                            lineNumbers: true,
                            theme: 'tneighties',
                            readOnly: true,
                            firstLineNumber: 0,
                            indentUnit: 2 });
  mipsviewer.getScrollerElement().style.height = '100%';
  editor.refresh();
  mipsviewer.refresh();
  handle_code();
});
</script>
<div id="ConsoleSplitter" class="splitter">
  <div id="CodeViewSplitter">
    <div id="code"></div>
    <div id="mips"></div>
  </div>
  <div> Console goes here!
</div>
